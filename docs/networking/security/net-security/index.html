<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.3" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../favicons/android-192x192.png" sizes="192x192">

<title>Network Security | Verrazzano Enterprise Container Platform</title><meta property="og:title" content="Network Security" />
<meta property="og:description" content="Lean about Verrazzano network security" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://verrazzano.io/docs/networking/security/net-security/" />
<meta property="article:modified_time" content="2021-07-16T17:30:39-04:00" /><meta property="og:site_name" content="Verrazzano Enterprise Container Platform" />
<meta itemprop="name" content="Network Security">
<meta itemprop="description" content="Lean about Verrazzano network security">
<meta itemprop="dateModified" content="2021-07-16T17:30:39-04:00" />
<meta itemprop="wordCount" content="2318">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Network Security"/>
<meta name="twitter:description" content="Lean about Verrazzano network security"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-177109661-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>






<link rel="preload" href="../../../../scss/main.min.0b83ff56fc112b393e058988d839c5060c7d1dcb1145d9af9308812f68779e8a.css" as="style">
<link href="../../../../scss/main.min.0b83ff56fc112b393e058988d839c5060c7d1dcb1145d9af9308812f68779e8a.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="../../../../">
		<span class="navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 112 30"><defs><style>.cls-1{fill:#fff}</style></defs><title>Artboard 3</title><path class="cls-1" d="M6.48 25.09l2.33-7.52h3.5L8.5 28.3H4.42L.61 17.57h3.5z"/><path class="cls-1" d="M23.7 23.53H16.25a2.49 2.49.0 00.62 1.74 2.19 2.19.0 002.63.17 1.73 1.73.0 00.64-1h3.48a4.54 4.54.0 01-.92 2 5 5 0 01-1.81 1.41 5.73 5.73.0 01-2.44.51 5.66 5.66.0 01-2.8-.67 4.71 4.71.0 01-1.92-1.91A6 6 0 0113 22.94 6.08 6.08.0 0113.72 20a4.68 4.68.0 011.92-1.9 5.72 5.72.0 012.81-.67 5.74 5.74.0 012.8.66 4.6 4.6.0 011.88 1.83 5.52 5.52.0 01.66 2.73A4.78 4.78.0 0123.7 23.53zm-3.8-3a2.3 2.3.0 00-2.95.0 2.24 2.24.0 00-.68 1.58h4.2A2 2 0 0019.9 20.56z"/><path class="cls-1" d="M29.92 18A4.11 4.11.0 0132 17.45V21h-.94a3.25 3.25.0 00-2 .56 2.22 2.22.0 00-.73 1.89V28.3H25V17.57h3.29v2A4.56 4.56.0 0129.92 18z"/><path class="cls-1" d="M38.21 18a4.11 4.11.0 012.11-.58V21h-.94a3.25 3.25.0 00-2 .56 2.24 2.24.0 00-.72 1.89V28.3H33.34V17.57h3.29v2A4.62 4.62.0 0138.21 18z"/><path class="cls-1" d="M47.82 18a3.34 3.34.0 011.31 1.52V17.57H52.4V28.3H49.13V26.36a3.34 3.34.0 01-1.31 1.52 3.88 3.88.0 01-2.11.56 4.29 4.29.0 01-2.38-.67 4.49 4.49.0 01-1.65-1.91 6.54 6.54.0 01-.61-2.92A6.57 6.57.0 0141.68 20a4.46 4.46.0 011.65-1.9 4.29 4.29.0 012.38-.67A3.88 3.88.0 0147.82 18zm-2.76 3a2.71 2.71.0 00-.64 1.93 2.7 2.7.0 00.64 1.92 2.22 2.22.0 001.7.69 2.25 2.25.0 001.71-.71 2.68 2.68.0 00.66-1.9A2.7 2.7.0 0048.47 21a2.25 2.25.0 00-1.71-.7A2.22 2.22.0 0045.06 21z"/><path class="cls-1" d="M57.5 25.55h5V28.3H53.9V25.71l4.62-5.41H54V17.57h8.29v2.6z"/><path class="cls-1" d="M66.85 25.55h5V28.3H63.25V25.71l4.62-5.41H63.33V17.57h8.29v2.6z"/><path class="cls-1" d="M79.49 18a3.4 3.4.0 011.31 1.52V17.57h3.27V28.3H80.8V26.36a3.4 3.4.0 01-1.31 1.52 3.92 3.92.0 01-2.12.56A4.32 4.32.0 0175 27.77a4.56 4.56.0 01-1.65-1.91 6.68 6.68.0 01-.61-2.92A6.71 6.71.0 0173.34 20 4.53 4.53.0 0175 18.1a4.32 4.32.0 012.38-.67A3.92 3.92.0 0179.49 18zm-2.76 3a2.71 2.71.0 00-.65 1.93 2.7 2.7.0 00.65 1.92 2.21 2.21.0 001.7.69 2.23 2.23.0 001.7-.71 2.68 2.68.0 00.67-1.9A2.7 2.7.0 0080.13 21a2.43 2.43.0 00-3.4.0z"/><path class="cls-1" d="M95.23 18.68a4.92 4.92.0 011.09 3.39V28.3H93V22.45a2.37 2.37.0 00-.57-1.68 2 2 0 00-1.51-.6 2.06 2.06.0 00-1.58.63 2.53 2.53.0 00-.59 1.81V28.3H85.49V17.57h3.29v2A3.6 3.6.0 0190.15 18a4.08 4.08.0 012.15-.56A3.7 3.7.0 0195.23 18.68z"/><path class="cls-1" d="M105.91 18.1a4.85 4.85.0 012 1.91 5.79 5.79.0 01.72 2.93 5.75 5.75.0 01-.72 2.92 4.85 4.85.0 01-2 1.91 6.44 6.44.0 01-5.72.0 4.82 4.82.0 01-2-1.91 5.65 5.65.0 01-.73-2.92A5.69 5.69.0 0198.2 20a4.82 4.82.0 012-1.91 6.44 6.44.0 015.72.0zM101.47 21a2.79 2.79.0 00-.65 2 2.74 2.74.0 00.65 2 2.2 2.2.0 003.16.0 2.78 2.78.0 00.64-2 2.84 2.84.0 00-.64-2 2.18 2.18.0 00-3.16.0z"/><path class="cls-1" d="M26.77 3.64a.6.6.0 00-.6.6v11h1.2v-11A.6.6.0 0026.77 3.64z"/><path class="cls-1" d="M82.27 3.64a.6.6.0 00-.6.6v11h1.2v-11A.6.6.0 0082.27 3.64z"/><path class="cls-1" d="M23.07 6.6c-5.91 8.28-21.2 6.78-21.35 6.76a.6.6.0 00-.13 1.19c.18.0 1.41.14 3.26.14 5 0 14.57-.91 19.2-7.39a.6.6.0 10-1-.7z"/><path class="cls-1" d="M107.59 13.36c-.16.0-15.8 1.53-21.72-6.76a.6.6.0 00-1 .7c4.63 6.48 14.36 7.39 19.5 7.39 1.87.0 3.14-.12 3.32-.14a.6.6.0 00.54-.65A.61.61.0 00107.59 13.36z"/><path class="cls-1" d="M78.75 6.54C75 10.52 64.41 13 52.48 12.66 42 12.37 33.41 10 30.5 6.56a.6.6.0 10-.92.78c3.79 4.45 14.3 6.28 22.86 6.51.65.0 1.32.0 2 0 9.17.0 20.57-1.67 25.18-6.52a.6.6.0 00-.87-.82z"/><path class="cls-1" d="M110.19 4.92a3.82 3.82.0 00-4.77-.13 5.05 5.05.0 00-9.64.7 3.2 3.2.0 00-1.4-.33 3.1 3.1.0 00-3.1 3.09 2.94 2.94.0 00.12.84.6.6.0 00.57.44h.17a.6.6.0 00.41-.74 2.25 2.25.0 01-.07-.52A1.9 1.9.0 0195.81 7a.58.58.0 00.63.14.66.66.0 00.42-.54 3.85 3.85.0 017.66-.53.62.62.0 00.47.51.61.61.0 00.63-.26 2.51 2.51.0 013.77-.51.6.6.0 10.8-.9z"/></svg></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="../../../../docs/" ><span class="active">Documentation</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../../../offline-search-index.a5d49e276ac0e827f806efaf7959cdab.json"
  data-offline-search-base-href="../../../../"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../../../offline-search-index.a5d49e276ac0e827f806efaf7959cdab.json"
  data-offline-search-base-href="../../../../"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docsconcepts">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsverrazzanooam" href="../../../../docs/concepts/verrazzanooam/">Verrazzano and the Open Application Model</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsverrazzanomulticluster" href="../../../../docs/concepts/verrazzanomulticluster/">Verrazzano in a Multicluster Environment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsverrazzanoproject" href="../../../../docs/concepts/verrazzanoproject/">Verrazzano Projects</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/quickstart/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Quick Start</a>
  </li>
  <ul>
    <li class="collapse " id="docsquickstart">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Setup</a>
  </li>
  <ul>
    <li class="collapse " id="docssetup">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/platforms/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Platform Setup</a>
  </li>
  <ul>
    <li class="collapse " id="docssetupplatforms">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformsocioci" href="../../../../docs/setup/platforms/oci/oci/">OKE</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformsolcneolcne" href="../../../../docs/setup/platforms/olcne/olcne/">OLCNE</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformskindkind" href="../../../../docs/setup/platforms/kind/kind/">KIND</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformsgenericgeneric" href="../../../../docs/setup/platforms/generic/generic/">Generic</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/install/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Install</a>
  </li>
  <ul>
    <li class="collapse " id="docssetupinstall">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupinstallinstallation" href="../../../../docs/setup/install/installation/">Install Guide</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupinstallprofiles" href="../../../../docs/setup/install/profiles/">Installation Profiles</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupinstallmulticluster" href="../../../../docs/setup/install/multicluster/">Install Multicluster Verrazzano</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/install/customizing/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Customize Installations</a>
  </li>
  <ul>
    <li class="collapse " id="docssetupinstallcustomizing">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupinstallcustomizingstorage" href="../../../../docs/setup/install/customizing/storage/">Persistent Storage</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupuninstalluninstall" href="../../../../docs/setup/uninstall/uninstall/">Uninstall</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupupgradeupgrade" href="../../../../docs/setup/upgrade/upgrade/">Upgrade</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupprivate-registryprivate-registry" href="../../../../docs/setup/private-registry/private-registry/">Use a Private Registry</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/operations/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Access Verrazzano</a>
  </li>
  <ul>
    <li class="collapse " id="docsoperations">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Applications</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplications">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/multicluster/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Multicluster</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplicationsmulticluster">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/projects/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Projects</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplicationsprojects">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/workloads/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Workloads</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplicationsworkloads">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapplicationsworkloadscoherencecoherence" href="../../../../docs/applications/workloads/coherence/coherence/">Coherence</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapplicationsworkloadshelidonhelidon" href="../../../../docs/applications/workloads/helidon/helidon/">Helidon</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/networking/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Networking</a>
  </li>
  <ul>
    <li class="collapse show" id="docsnetworking">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsnetworkingtrafficnet-traffic" href="../../../../docs/networking/traffic/net-traffic/">Network Traffic</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docsnetworkingsecuritynet-security" href="../../../../docs/networking/security/net-security/">Network Security</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/security/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Security</a>
  </li>
  <ul>
    <li class="collapse " id="docssecurity">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityrbacrbac" href="../../../../docs/security/rbac/rbac/">Kubernetes RBAC</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecuritykeycloakkeycloak" href="../../../../docs/security/keycloak/keycloak/">Keycloak and SSO</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityproxiesproxies" href="../../../../docs/security/proxies/proxies/">Verrazzano Proxies</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityaccountsaccounts" href="../../../../docs/security/accounts/accounts/">Default User Accounts</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityappsecappsec" href="../../../../docs/security/appsec/appsec/">Application Security</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/monitoring/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Monitoring &amp; Logging</a>
  </li>
  <ul>
    <li class="collapse " id="docsmonitoring">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/monitoring/logs/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Logging</a>
  </li>
  <ul>
    <li class="collapse " id="docsmonitoringlogs">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsmonitoringmetricsmetrics" href="../../../../docs/monitoring/metrics/metrics/">Metrics</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/troubleshooting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a>
  </li>
  <ul>
    <li class="collapse " id="docstroubleshooting">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingtroubleshooting-application-deployment" href="../../../../docs/troubleshooting/troubleshooting-application-deployment/">Application Deployment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingtroubleshooting-multicluster" href="../../../../docs/troubleshooting/troubleshooting-multicluster/">Multicluster</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/troubleshooting/diagnostictools/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Diagnostic Tools</a>
  </li>
  <ul>
    <li class="collapse " id="docstroubleshootingdiagnostictools">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsverrazzanoanalysistool" href="../../../../docs/troubleshooting/diagnostictools/verrazzanoanalysistool/">Verrazzano Analysis Tools</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Analysis Advice</a>
  </li>
  <ul>
    <li class="collapse " id="docstroubleshootingdiagnostictoolsanalysisadvice">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullbackoff" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullbackoff/">Image Pull Back Off</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullnotfound" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullnotfound/">Image Pull Not Found</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullratelimit" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullratelimit/">Image Pull Rate Limit</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullservice" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullservice/">Image Pull Service Issue</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceingressnoloadbalancerip" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/ingressnoloadbalancerip/">Ingress Controller No Load Balancer IP</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceingressociiplimitexceeded" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/ingressociiplimitexceeded/">Ingress Controller OCI IP Limit Exceeded</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceinstallfailure" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/installfailure/">Install Failure</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceingressinstallfailure" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/ingressinstallfailure/">Install Ingress Controller Failure</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceinsufficientmemory" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/insufficientmemory/">Insufficient Memory</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadvicependingpods" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/pendingpods/">Pending Pods</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadvicepodproblemsnotreported" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/podproblemsnotreported/">Problem Pods</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingtroubleshooting" href="../../../../docs/troubleshooting/troubleshooting/">Known Issues</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Examples</a>
  </li>
  <ul>
    <li class="collapse " id="docssamples">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesapplication-deployment-guide" href="../../../../docs/samples/application-deployment-guide/">Application Deployment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssampleslift-and-shift" href="../../../../docs/samples/lift-and-shift/">Lift-and-Shift</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssampleshello-world" href="../../../../docs/samples/hello-world/">Hello World Helidon</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplessock-shop" href="../../../../docs/samples/sock-shop/">Sock Shop</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesspring-boot" href="../../../../docs/samples/spring-boot/">Spring Boot</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesstandard-kubernetes" href="../../../../docs/samples/standard-kubernetes/">Standard Kubernetes Resources</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplestodo-list" href="../../../../docs/samples/todo-list/">ToDo List</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesbobs-books" href="../../../../docs/samples/bobs-books/">Bob&#39;s Books</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Multicluster</a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticluster">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/hello-helidon/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticlusterhello-helidon">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/sock-shop/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticlustersock-shop">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/todo-list/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticlustertodo-list">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/helidon-config/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssampleshelidon-config">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/hello-helidon/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssampleshello-helidon">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse " id="docsreference">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/reference/api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API</a>
  </li>
  <ul>
    <li class="collapse " id="docsreferenceapi">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapioamingresstrait" href="../../../../docs/reference/api/oam/ingresstrait/">IngressTrait CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapioammetricstrait" href="../../../../docs/reference/api/oam/metricstrait/">MetricsTrait CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlusterapplicationconfiguration" href="../../../../docs/reference/api/multicluster/multiclusterapplicationconfiguration/">MultiClusterApplicationConfiguration CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlustercomponent" href="../../../../docs/reference/api/multicluster/multiclustercomponent/">MultiClusterComponent CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlusterconfigmap" href="../../../../docs/reference/api/multicluster/multiclusterconfigmap/">MultiClusterConfigMap CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlusterresourcestatus" href="../../../../docs/reference/api/multicluster/multiclusterresourcestatus/">MultiClusterResourceStatus Subresource</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlustersecret" href="../../../../docs/reference/api/multicluster/multiclustersecret/">MultiClusterSecret CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlusterplacement" href="../../../../docs/reference/api/multicluster/placement/">Placement Subresource</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapiverrazzanoverrazzano" href="../../../../docs/reference/api/verrazzano/verrazzano/">Verrazzano CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapioamworkloads" href="../../../../docs/reference/api/oam/workloads/">Verrazzano Workload CRDs</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlusterverrazzanomanagedcluster" href="../../../../docs/reference/api/multicluster/verrazzanomanagedcluster/">VerrazzanoManagedCluster CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlusterverrazzanoproject" href="../../../../docs/reference/api/multicluster/verrazzanoproject/">VerrazzanoProject CRD</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceversions" href="../../../../docs/reference/versions/">Software Versions</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/releasenotes/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Release Notes</a>
  </li>
  <ul>
    <li class="collapse " id="docsreleasenotes">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            











<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#networkpolicies">NetworkPolicies</a></li>
        <li><a href="#mtls">mTLS</a></li>
        <li><a href="#tls">TLS</a></li>
        <li><a href="#istio-mesh">Istio mesh</a></li>
        <li><a href="#components-in-the-mesh">Components in the mesh</a></li>
        <li><a href="#applications-in-the-mesh">Applications in the mesh</a></li>
        <li><a href="#istio-access-control">Istio access control</a></li>
        <li><a href="#weblogic-domain-access">WebLogic domain access</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://verrazzano.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://verrazzano.io/docs/networking/">Networking</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://verrazzano.io/docs/networking/security/net-security/">Network Security</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Network Security</h1>
    <div class="lead">Lean about Verrazzano network security</div>
	       
	<p>Verrazzano manages and secures network traffic between Verrazzano system components and deployed applications.
Verrazzano does not manage or secure traffic for the Kubernetes cluster itself, or for
non-Verrazzano services or applications running in the cluster. Traffic is secured at two levels in the network stack:</p>
<ul>
<li>ISO Layer 3/4: Using NetworkPolicies to control IP access to Pods.</li>
<li>ISO Layer 6: Using TLS and mTLS to provide authentication, confidentiality,
and integrity for connections within the cluster, and for external connections.</li>
</ul>
<h2 id="networkpolicies">NetworkPolicies</h2>
<p>By default, all Pods in a Kubernetes cluster have network access to all other Pods in the cluster.
Kubernetes has a NetworkPolicy resource that provides network level 3 and 4 security for Pods,
restricting both ingress and egress IP traffic for a set of Pods in a namespace.  Verrazzano configures all
system components with NetworkPolicies to control ingress.  Egress is not restricted.</p>
<p><strong>NOTE:</strong> A NetworkPolicy resource needs a NetworkPolicy controller to implement the policy, otherwise the
policy has no effect.  You must install a Kubernetes CNI plug-in that provides a NetworkPolicy controller,
such as Calico, before installing Verrazzano, or else the policies are ignored.</p>
<h3 id="networkpolicies-for-system-components">NetworkPolicies for system components</h3>
<p>Verrazzano installs a set of NetworkPolicies for system components to control ingress into the Pods.
A policy is scoped to a namespace and uses selectors to specify the Pods that the policy applies to, along
with the ingress and egress rules.  For example, the following policy applies to the Verrazzano API Pod in the
<code>verrazzano-system</code> namespace.  This policy allows network traffic from NGINX Ingress Controller on
port 8775, and from Prometheus on port 15090.  No other Pods can reach those ports or any other ports of the
Verrazzano API Pod.  Notice that namespace selectors need to be used; the NetworkPolicy resource does not support
specifying the namespace name.</p>
<pre><code>apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
...
spec:
  PodSelector:
    matchLabels:
      app: verrazzano-api
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: ingress-nginx
      PodSelector:
        matchLabels:
          app.kubernetes.io/instance: ingress-controller
    ports:
    - port: 8775
      protocol: TCP
  - from:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: verrazzano-system
      PodSelector:
        matchLabels:
          app: system-prometheus
    ports:
    - port: 15090
      protocol: TCP
</code></pre><p>The following table shows all of the ingresses that allow network traffic into system components.
The ports shown are Pod ports, which is what NetworkPolicies require.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th align="left">Pod Port</th>
<th align="left">From</th>
<th align="left">Description</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Verrazzano Application Operator</td>
<td align="left">9443</td>
<td align="left">Kubernetes API Server</td>
<td align="left">Webhook entrypoint.</td>
<td></td>
</tr>
<tr>
<td>Verrazzano Platform Operator</td>
<td align="left">9443</td>
<td align="left">Kubernetes API Server</td>
<td align="left">Webhook entrypoint.</td>
<td></td>
</tr>
<tr>
<td>Verrazzano Console</td>
<td align="left">8000</td>
<td align="left">NGINX Ingress</td>
<td align="left">Access from external client.</td>
<td></td>
</tr>
<tr>
<td>Verrazzano Console</td>
<td align="left">15090</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>Verrazzano Proxy</td>
<td align="left">8775</td>
<td align="left">NGINX Ingress</td>
<td align="left">Access from external client.</td>
<td></td>
</tr>
<tr>
<td>Verrazzano Proxy</td>
<td align="left">15090</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>cert-manager</td>
<td align="left">9402</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>Coherence Operator</td>
<td align="left">9443</td>
<td align="left">Prometheus</td>
<td align="left">Webhook entrypoint.</td>
<td></td>
</tr>
<tr>
<td>Elasticsearch</td>
<td align="left">8775</td>
<td align="left">NGINX Ingress</td>
<td align="left">Access from external client.</td>
<td></td>
</tr>
<tr>
<td>Elasticsearch</td>
<td align="left">8775</td>
<td align="left">Fluentd</td>
<td align="left">Access from Fluentd.</td>
<td></td>
</tr>
<tr>
<td>Elasticsearch</td>
<td align="left">9200</td>
<td align="left">Kibana, Internal</td>
<td align="left">Elasticsearch data port.</td>
<td></td>
</tr>
<tr>
<td>Elasticsearch</td>
<td align="left">9300</td>
<td align="left">Internal</td>
<td align="left">Elasticsearch cluster port.</td>
<td></td>
</tr>
<tr>
<td>Elasticsearch</td>
<td align="left">15090</td>
<td align="left">Prometheus</td>
<td align="left">Envoy metrics scraping.</td>
<td></td>
</tr>
<tr>
<td>Istio control plane</td>
<td align="left">15012</td>
<td align="left">Envoy</td>
<td align="left">Envoy access to <code>istiod</code>.</td>
<td></td>
</tr>
<tr>
<td>Istio control plane</td>
<td align="left">15014</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>Istio control plane</td>
<td align="left">15017</td>
<td align="left">Kubernetes API Server</td>
<td align="left">Webhook entrypoint.</td>
<td></td>
</tr>
<tr>
<td>Istio ingress gateway</td>
<td align="left">8443</td>
<td align="left">External</td>
<td align="left">Application ingress.</td>
<td></td>
</tr>
<tr>
<td>Istio ingress gateway</td>
<td align="left">15090</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>Istio egress gateway</td>
<td align="left">8443</td>
<td align="left">Mesh services</td>
<td align="left">Application egress.</td>
<td></td>
</tr>
<tr>
<td>Istio egress gateway</td>
<td align="left">15090</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>Keycloak</td>
<td align="left">8080</td>
<td align="left">NGINX Ingress</td>
<td align="left">Access from external client.</td>
<td></td>
</tr>
<tr>
<td>Keycloak</td>
<td align="left">15090</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>MySql</td>
<td align="left">15090</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>MySql</td>
<td align="left">3306</td>
<td align="left">Keycloak</td>
<td align="left">Keycloak datastore.</td>
<td></td>
</tr>
<tr>
<td>Node exporter</td>
<td align="left">9100</td>
<td align="left">Prometheus</td>
<td align="left">Prometheus scraping.</td>
<td></td>
</tr>
<tr>
<td>Rancher</td>
<td align="left">80</td>
<td align="left">NGINX Ingress</td>
<td align="left">Access from external client.</td>
<td></td>
</tr>
<tr>
<td>Rancher</td>
<td align="left">9443</td>
<td align="left">Kubernetes API Server</td>
<td align="left">Webhook entrypoint.</td>
<td></td>
</tr>
<tr>
<td>Prometheus</td>
<td align="left">8775</td>
<td align="left">NGINX Ingress</td>
<td align="left">Access from external client.</td>
<td></td>
</tr>
<tr>
<td>Prometheus</td>
<td align="left">9090</td>
<td align="left">Grafana</td>
<td align="left">Acccess for Grafana UI.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="networkpolicies-for-applications">NetworkPolicies for applications</h3>
<p>By default, applications do not have NetworkPolicies that restrict ingress into the application or egress from it.
You can configure them for the application namespaces using the NetworkPolicy section of a Verrazzano project.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">NOTE</h4>
<p>Verrazzano requires specific ingress to and egress from application pods. If you add a NetworkPolicy for your application namespace or pods,
you must add an additional policy to ensure that Verrazzano still has the required access it needs. The ingress policy is only needed if you restrict ingress.
Likewise, the egress policy is only needed if you restrict egress. Following are the ingress and egress NetworkPolicies:</p>
<details>
<summary>ingress NetworkPolicies</summary>
<pre><code>  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: istio-system
      podSelector:
        matchLabels:
          app: istiod
  - from:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: istio-system
      podSelector:
        matchLabels:
          app: istio-ingressgateway
  - from:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: verrazzano-system
      podSelector:
        matchLabels:
          app: system-prometheus
  - from:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: verrazzano-system
      podSelector:
        matchLabels:
          app: coherence-operator
  - from:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: verrazzano-system
      podSelector:
        matchLabels:
          app: weblogic-operator
</code></pre></details>
<details>
<summary>egress NetworkPolicies</summary>
<pre><code>  egress:
  - ports:
    - port: 15012
      protocol: TCP
    to:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: istio-system
      podSelector:
        matchLabels:
          app: istiod
  - to:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: istio-system
      podSelector:
        matchLabels:
          app: istio-egressgateway
  - ports:
    - port: 53
      protocol: TCP
    - port: 53
      protocol: UDP
    to:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: kube-system
  - ports:
    - port: 8000
      protocol: TCP
    to:
    - namespaceSelector:
        matchLabels:
          verrazzano.io/namespace: verrazzano-system
      podSelector:
        matchLabels:
          app: coherence-operator
</code></pre></details>

</div>

<h3 id="networkpolicies-for-envoy-sidecar-proxies">NetworkPolicies for Envoy sidecar proxies</h3>
<p>As mentioned, Envoy sidecar proxies run in both system component pods and application pods.  Each proxy sends requests
to the Istio control plane pod, <code>istiod</code>, for a variety of reasons. During installation, Verrazzano creates a NetworkPolicy
named <code>istiod-access</code> in the <code>istio-system</code> namespace to give ingress to system component sidecar proxies.  For applications,
Verrazzano creates a per-application NetworkPolicy in the <code>istio-system</code> namespace to allow the same access to <code>istiod</code>.
When the application is deleted, Verrazzano will delete the policy.</p>
<h2 id="mtls">mTLS</h2>
<p>Istio can be enabled to use mTLS between services in the mesh, and also between the Istio gateways and Envoy sidecar proxies.
There are various options to customize mTLS usage, for example it can be disabled on a per-port level.  The Istio
control plane, Istiod, is a CA and provides key and certificate rotation for the Envoy proxies, both gateways and sidecars.</p>
<p>Verrazzano configures Istio to have strict mTLS for the mesh.  All components and applications put into the mesh
will use mTLS, with the exception of Coherence clusters, which are not in the mesh. Also, all traffic between the Istio
ingress gateway and mesh sidecars use mTLS, and the same is true between the proxy sidecars and the egress gateway.</p>
<p>Verrazzano sets up mTLS during installation with the PeerAuthentication resource as follows:</p>
<pre><code>apiVersion: v1
items:
- apiVersion: security.istio.io/v1beta1
  kind: PeerAuthentication
  ...
  spec:
    mtls:
      mode: STRICT
</code></pre><h2 id="tls">TLS</h2>
<p>TLS is used by external clients to access the cluster, both through the NGINX Ingress Controller and the Istio ingress gateway.
The certificate used by these TLS connections vary; see <a href="../../../../docs/security/">Verrazzano security</a> for details.
All TLS connections are terminated at the ingress proxy. Traffic between the two proxies and the internal cluster Pods
always uses mTLS, because those Pods are all in the Istio mesh.</p>
<h2 id="istio-mesh">Istio mesh</h2>
<p>Istio provides extensive security protection for both authentication and authorization, as described in
<a href="HTTPS://istio.io/latest/docs/concepts/security">Istio Security</a>. Access control and mTLS are two security
features that Verrazzano configures.  These security features are available in the context of a service mesh.</p>
<p>A service mesh is an infrastructure layer that provides certain capabilities like security, observability, load balancing,
and such, for services.  Istio defines a service mesh <a href="HTTPS://istio.io/latest/about/service-mesh/">here</a>.
In the context of Istio on Kubernetes, a service in the mesh is a Kubernetes Service. Consider the Bob&rsquo;s Books example application, which
has several OAM components defined.  At runtime, there is a Kubernetes Service for each component, and each Service is
in the mesh, with one or more Pods associated with the service.  All services in the mesh have an Envoy proxy in
front of their Pods, intercepting network traffic to and from the Pod.  In Kubernetes, that proxy happens to be a sidecar
running in each Pod.</p>
<p>There are various ways to put a service in the mesh. Verrazzano uses the namespace label, <code>istio-injection: enabled</code>,
to designate that all Pods in a given namespace are in the mesh.  When a Pod is created in that namespace, the Istio control
plane mutating webhook, changes the Pod spec to add the Envoy proxy sidecar container, causing the Pod to be in the mesh.</p>
<h3 id="disabling-sidecar-injection">Disabling sidecar injection</h3>
<p>In certain cases, Verrazzano needs to disable sidecar injection for specific Pods in a namespace.  This is done in two ways:
first, during installation, Verrazzano modifies the <code>istio-sidecar-injector</code> ConfigMap using a Helm override file for the Istio
chart.  This excludes several components from the mesh, such as the Verrazzano application operator.  Second, certain Pods, such
as Coherence Pods, are labeled at runtime with <code>sidecar.istio.io/inject=&quot;false&quot;</code> to exclude them from the mesh.</p>
<h2 id="components-in-the-mesh">Components in the mesh</h2>
<p>The following Verrazzano components are in the mesh and use mTLS for all service to service communication.</p>
<ul>
<li>Elasticsearch</li>
<li>Fluentd</li>
<li>Grafana</li>
<li>Kibana</li>
<li>Keycloak</li>
<li>MySQL</li>
<li>NGINX Ingress Controller</li>
<li>Prometheus</li>
<li>Verrazzano API Proxy</li>
<li>Verrazzano Console</li>
<li>WebLogic Operator</li>
</ul>
<p>Some of these components, have mesh-related details that are worth noting.</p>
<h3 id="nginx">NGINX</h3>
<p>The NGINX Ingress Controller listens for HTTPS traffic, and provides ingress into the cluster.  NGINX is
configured to do TLS termination of client connections.  All traffic from NGINX to the mesh services
use mTLS, which means that traffic is fully encrypted from the client to the target back-end services.</p>
<h3 id="keycloak-and-mysql">Keycloak and MySQL</h3>
<p>Keycloak and MySQL are also in the mesh and use mTLS for network traffic.  Because all of the components that use
Keycloak are in the mesh, there is end to end mTLS security for all identity management handled by Keycloak.  The following components
access Keycloak:</p>
<ul>
<li>Verrazzano API Proxy</li>
<li>Verrazzano API Console</li>
<li>Elasticsearch</li>
<li>Prometheus</li>
<li>Grafana</li>
<li>Kibana</li>
</ul>
<h3 id="prometheus">Prometheus</h3>
<p>Although Prometheus is in the mesh, it is configured to use the Envoy sidecar and mTLS only when communicating with
Keycloak.  All the traffic related to scraping metrics, bypasses the sidecar proxy, doesn&rsquo;t use
the service IP address, but rather connects to the scrape target using the Pod IP address.  If the scrape target is in the mesh,
then HTTPS is used; otherwise, HTTP is used.  For Verrazzano multicluster, Prometheus also connects from the admin cluster
to the Prometheus server in the managed cluster by using the managed cluster NGINX Ingress, using HTTPS.  Prometheus
in the managed cluster and never establishes connections to targets outside the cluster.</p>
<p>Because Prometheus is in the mesh, additional configuration is done to allow the Envoy sidecar to be bypassed when scraping Pods.
This is done with the Prometheus Pod annotation <code>traffic.sidecar.istio.io/includeOutboundIPRanges: &lt;keycloak-service-ip&gt;</code>.  This
causes traffic bound for Keycloak to go through the Envoy sidecar, and all other traffic to bypass the sidecar.</p>
<h3 id="weblogic-kubernetes-operator">WebLogic Kubernetes Operator</h3>
<p>When the WebLogic operator creates a domain, it needs to communicate with the Pods in the domain. Verrazzano puts the
WebLogic operator in the mesh so that it can communicate with the domain Pods using mTLS.  As a result, the WebLogic
domain must be created in the mesh.</p>
<h2 id="applications-in-the-mesh">Applications in the mesh</h2>
<p>Before you create a Verrazzano application, you should decide if it should be in the mesh.  You control sidecar injection,
for example, mesh inclusion, by labeling the application namespace with <code>istio-injection=enabled</code> or <code>istio-injection=disabled</code>.
By default, applications will not be put in the mesh if that label is missing.  If your application uses a Verrazzano
project, then Verrazzano will label the namespaces in the project to enable injection. If the application is in the mesh,
then mTLS will be used.  You can change the PeerAuthentication mTLS mode as desired if you don&rsquo;t want strict mTLS.
Also, if you need to add mTLS port exceptions, you can do this with DestinationRules or by creating another PeerAuthentication
resource in the application namespace.  Consult the Istio documentation for more information.</p>
<h3 id="weblogic">WebLogic</h3>
<p>When the WebLogic operator creates a domain, it needs to communicate with the Pods in the domain. Verrazzano puts the WebLogic operator
in the mesh so that it can communicate with the domain Pods using mTLS.  Because of that, the WebLogic domain must be created in the mesh.
Also, because mTLS is used, do not configure WebLogic to use TLS.  If you want to use a custom certificate for your application,
you can specify that in the ApplicationConfiguration, but that TLS connection will be terminated at the Istio ingress gateway, which
you configure using a Verrazzano IngressTrait.</p>
<h3 id="coherence">Coherence</h3>
<p>Coherence clusters are represented by the Coherence resource, and are not in the mesh.  When Verrazzano creates a Coherence
cluster in a namespace that is annotated to do sidecar injection, it disables injection of the Coherence resource using the
<code>sidecar.istio.io/inject=&quot;false&quot;</code> label shown previously.  Furthermore, Verrazzano will create a DestinationRule in the application
namespace to disable mTLS for the Coherence extend port <code>9000</code>.  This allows a service in the mesh to call the Coherence
extend proxy.  For an example, see <a href="HTTPS://github.com/verrazzano/verrazzano/blob/master/examples/bobs-books">Bobs Books</a>.
Here is an example of a DestinationRule created for the Bob&rsquo;s Books application which includes a Coherence cluster.</p>
<pre><code>API Version:  networking.istio.io/v1beta1
Kind:         DestinationRule
...
Spec:
  Host:  *.bobs-books.svc.cluster.local
  Traffic Policy:
    Port Level Settings:
      Port:
        Number:  9000
      Tls:
    Tls:
      Mode:  ISTIO_MUTUAL
</code></pre><h2 id="istio-access-control">Istio access control</h2>
<p>Istio lets you control access to your workload in the mesh, using the AuthorizationPolicy resource. This lets you
control which services or Pods can access your workloads.  Some of these options require mTLS; for more information, see
<a href="HTTPS://istio.io/latest/docs/reference/config/security/authorization-policy/">Authorization Policy</a>.</p>
<p>Verrazzano always creates AuthorizationPolicies for applications, but never for system components.  During application deployment,
Verrazzano creates the policy in the application namespace and configures it to allow access from the following:</p>
<ul>
<li>Other Pods in the application</li>
<li>Istio ingress gateway</li>
<li>Prometheus scraper</li>
</ul>
<p>This prevents other Pods in the cluster from gaining network access to the application Pods.<br>
Istio uses a service identity to determine the identity of the request&rsquo;s origin; for Kubernetes
this identity is a service account.  Verrazzano creates a per-application AuthorizationPolicy as follows:</p>
<pre><code>AuthorizationPolicy
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
...
spec:
  rules:
    - from:
    - source:
  principals:
    - cluster.local/ns/sales/sa/greeter
    - cluster.local/ns/istio-system/sa/istio-ingressgateway-service-account
    - cluster.local/ns/verrazzano-system/sa/verrazzano-monitoring-operator
</code></pre><h2 id="weblogic-domain-access">WebLogic domain access</h2>
<p>For WebLogic applications, the WebLogic operator must have access to the domain Pods for two reasons.
First, it must access the domain servers to get health status; second it must inject configuration into
the Monitoring Exporter sidecar running in the domain server Pods. When a WebLogic domain is created,
Verrazzano adds an additional source, <code>cluster.local/ns/verrazzano-system/sa/weblogic-operator-sa</code> to
the <code>principals</code> section to permit that access.</p>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/verrazzano/docs/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/verrazzano/docs/issues/new">tell us how we can improve</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified July 16, 2021: <a  href="../../../../commit/51ce59d67e5af5baa5111ee790a45ee649d1f7a1">system network policies needed if application network policies is defined. (#185) (51ce59d)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://twitter.com/verrazzano_io">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/tags/verrazzano">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/verrazzano/verrazzano">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://bit.ly/3gOeRJn">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 Oracle and/or its affiliates</small>
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="../../../../js/main.min.460c8ae21829f9b330823a08f34ac961d7d0daa8874c8c9eba7ea0484bb42a79.js" integrity="sha256-RgyK4hgp&#43;bMwgjoI80rJYdfQ2qiHTIyeun6gSEu0Knk=" crossorigin="anonymous"></script>




  </body>
</html>
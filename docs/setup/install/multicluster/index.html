<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.3" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../favicons/android-192x192.png" sizes="192x192">

<title>Install Multicluster Verrazzano | Verrazzano Enterprise Container Platform</title><meta property="og:title" content="Install Multicluster Verrazzano" />
<meta property="og:description" content="How to set up a multicluster Verrazzano environment" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://verrazzano.io/docs/setup/install/multicluster/" />
<meta property="article:modified_time" content="2021-07-19T15:31:49-04:00" /><meta property="og:site_name" content="Verrazzano Enterprise Container Platform" />
<meta itemprop="name" content="Install Multicluster Verrazzano">
<meta itemprop="description" content="How to set up a multicluster Verrazzano environment">
<meta itemprop="dateModified" content="2021-07-19T15:31:49-04:00" />
<meta itemprop="wordCount" content="1430">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Install Multicluster Verrazzano"/>
<meta name="twitter:description" content="How to set up a multicluster Verrazzano environment"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-177109661-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>






<link rel="preload" href="../../../../scss/main.min.0b83ff56fc112b393e058988d839c5060c7d1dcb1145d9af9308812f68779e8a.css" as="style">
<link href="../../../../scss/main.min.0b83ff56fc112b393e058988d839c5060c7d1dcb1145d9af9308812f68779e8a.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="../../../../">
		<span class="navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 112 30"><defs><style>.cls-1{fill:#fff}</style></defs><title>Artboard 3</title><path class="cls-1" d="M6.48 25.09l2.33-7.52h3.5L8.5 28.3H4.42L.61 17.57h3.5z"/><path class="cls-1" d="M23.7 23.53H16.25a2.49 2.49.0 00.62 1.74 2.19 2.19.0 002.63.17 1.73 1.73.0 00.64-1h3.48a4.54 4.54.0 01-.92 2 5 5 0 01-1.81 1.41 5.73 5.73.0 01-2.44.51 5.66 5.66.0 01-2.8-.67 4.71 4.71.0 01-1.92-1.91A6 6 0 0113 22.94 6.08 6.08.0 0113.72 20a4.68 4.68.0 011.92-1.9 5.72 5.72.0 012.81-.67 5.74 5.74.0 012.8.66 4.6 4.6.0 011.88 1.83 5.52 5.52.0 01.66 2.73A4.78 4.78.0 0123.7 23.53zm-3.8-3a2.3 2.3.0 00-2.95.0 2.24 2.24.0 00-.68 1.58h4.2A2 2 0 0019.9 20.56z"/><path class="cls-1" d="M29.92 18A4.11 4.11.0 0132 17.45V21h-.94a3.25 3.25.0 00-2 .56 2.22 2.22.0 00-.73 1.89V28.3H25V17.57h3.29v2A4.56 4.56.0 0129.92 18z"/><path class="cls-1" d="M38.21 18a4.11 4.11.0 012.11-.58V21h-.94a3.25 3.25.0 00-2 .56 2.24 2.24.0 00-.72 1.89V28.3H33.34V17.57h3.29v2A4.62 4.62.0 0138.21 18z"/><path class="cls-1" d="M47.82 18a3.34 3.34.0 011.31 1.52V17.57H52.4V28.3H49.13V26.36a3.34 3.34.0 01-1.31 1.52 3.88 3.88.0 01-2.11.56 4.29 4.29.0 01-2.38-.67 4.49 4.49.0 01-1.65-1.91 6.54 6.54.0 01-.61-2.92A6.57 6.57.0 0141.68 20a4.46 4.46.0 011.65-1.9 4.29 4.29.0 012.38-.67A3.88 3.88.0 0147.82 18zm-2.76 3a2.71 2.71.0 00-.64 1.93 2.7 2.7.0 00.64 1.92 2.22 2.22.0 001.7.69 2.25 2.25.0 001.71-.71 2.68 2.68.0 00.66-1.9A2.7 2.7.0 0048.47 21a2.25 2.25.0 00-1.71-.7A2.22 2.22.0 0045.06 21z"/><path class="cls-1" d="M57.5 25.55h5V28.3H53.9V25.71l4.62-5.41H54V17.57h8.29v2.6z"/><path class="cls-1" d="M66.85 25.55h5V28.3H63.25V25.71l4.62-5.41H63.33V17.57h8.29v2.6z"/><path class="cls-1" d="M79.49 18a3.4 3.4.0 011.31 1.52V17.57h3.27V28.3H80.8V26.36a3.4 3.4.0 01-1.31 1.52 3.92 3.92.0 01-2.12.56A4.32 4.32.0 0175 27.77a4.56 4.56.0 01-1.65-1.91 6.68 6.68.0 01-.61-2.92A6.71 6.71.0 0173.34 20 4.53 4.53.0 0175 18.1a4.32 4.32.0 012.38-.67A3.92 3.92.0 0179.49 18zm-2.76 3a2.71 2.71.0 00-.65 1.93 2.7 2.7.0 00.65 1.92 2.21 2.21.0 001.7.69 2.23 2.23.0 001.7-.71 2.68 2.68.0 00.67-1.9A2.7 2.7.0 0080.13 21a2.43 2.43.0 00-3.4.0z"/><path class="cls-1" d="M95.23 18.68a4.92 4.92.0 011.09 3.39V28.3H93V22.45a2.37 2.37.0 00-.57-1.68 2 2 0 00-1.51-.6 2.06 2.06.0 00-1.58.63 2.53 2.53.0 00-.59 1.81V28.3H85.49V17.57h3.29v2A3.6 3.6.0 0190.15 18a4.08 4.08.0 012.15-.56A3.7 3.7.0 0195.23 18.68z"/><path class="cls-1" d="M105.91 18.1a4.85 4.85.0 012 1.91 5.79 5.79.0 01.72 2.93 5.75 5.75.0 01-.72 2.92 4.85 4.85.0 01-2 1.91 6.44 6.44.0 01-5.72.0 4.82 4.82.0 01-2-1.91 5.65 5.65.0 01-.73-2.92A5.69 5.69.0 0198.2 20a4.82 4.82.0 012-1.91 6.44 6.44.0 015.72.0zM101.47 21a2.79 2.79.0 00-.65 2 2.74 2.74.0 00.65 2 2.2 2.2.0 003.16.0 2.78 2.78.0 00.64-2 2.84 2.84.0 00-.64-2 2.18 2.18.0 00-3.16.0z"/><path class="cls-1" d="M26.77 3.64a.6.6.0 00-.6.6v11h1.2v-11A.6.6.0 0026.77 3.64z"/><path class="cls-1" d="M82.27 3.64a.6.6.0 00-.6.6v11h1.2v-11A.6.6.0 0082.27 3.64z"/><path class="cls-1" d="M23.07 6.6c-5.91 8.28-21.2 6.78-21.35 6.76a.6.6.0 00-.13 1.19c.18.0 1.41.14 3.26.14 5 0 14.57-.91 19.2-7.39a.6.6.0 10-1-.7z"/><path class="cls-1" d="M107.59 13.36c-.16.0-15.8 1.53-21.72-6.76a.6.6.0 00-1 .7c4.63 6.48 14.36 7.39 19.5 7.39 1.87.0 3.14-.12 3.32-.14a.6.6.0 00.54-.65A.61.61.0 00107.59 13.36z"/><path class="cls-1" d="M78.75 6.54C75 10.52 64.41 13 52.48 12.66 42 12.37 33.41 10 30.5 6.56a.6.6.0 10-.92.78c3.79 4.45 14.3 6.28 22.86 6.51.65.0 1.32.0 2 0 9.17.0 20.57-1.67 25.18-6.52a.6.6.0 00-.87-.82z"/><path class="cls-1" d="M110.19 4.92a3.82 3.82.0 00-4.77-.13 5.05 5.05.0 00-9.64.7 3.2 3.2.0 00-1.4-.33 3.1 3.1.0 00-3.1 3.09 2.94 2.94.0 00.12.84.6.6.0 00.57.44h.17a.6.6.0 00.41-.74 2.25 2.25.0 01-.07-.52A1.9 1.9.0 0195.81 7a.58.58.0 00.63.14.66.66.0 00.42-.54 3.85 3.85.0 017.66-.53.62.62.0 00.47.51.61.61.0 00.63-.26 2.51 2.51.0 013.77-.51.6.6.0 10.8-.9z"/></svg></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="../../../../docs/" ><span class="active">Documentation</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../../../offline-search-index.a5d49e276ac0e827f806efaf7959cdab.json"
  data-offline-search-base-href="../../../../"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="../../../../offline-search-index.a5d49e276ac0e827f806efaf7959cdab.json"
  data-offline-search-base-href="../../../../"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docsconcepts">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsverrazzanooam" href="../../../../docs/concepts/verrazzanooam/">Verrazzano and the Open Application Model</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsverrazzanomulticluster" href="../../../../docs/concepts/verrazzanomulticluster/">Verrazzano in a Multicluster Environment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsverrazzanoproject" href="../../../../docs/concepts/verrazzanoproject/">Verrazzano Projects</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/quickstart/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Quick Start</a>
  </li>
  <ul>
    <li class="collapse " id="docsquickstart">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Setup</a>
  </li>
  <ul>
    <li class="collapse show" id="docssetup">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/platforms/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Platform Setup</a>
  </li>
  <ul>
    <li class="collapse " id="docssetupplatforms">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformsocioci" href="../../../../docs/setup/platforms/oci/oci/">OKE</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformsolcneolcne" href="../../../../docs/setup/platforms/olcne/olcne/">OLCNE</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformskindkind" href="../../../../docs/setup/platforms/kind/kind/">KIND</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupplatformsgenericgeneric" href="../../../../docs/setup/platforms/generic/generic/">Generic</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/install/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Install</a>
  </li>
  <ul>
    <li class="collapse show" id="docssetupinstall">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupinstallinstallation" href="../../../../docs/setup/install/installation/">Install Guide</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupinstallprofiles" href="../../../../docs/setup/install/profiles/">Installation Profiles</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docssetupinstallmulticluster" href="../../../../docs/setup/install/multicluster/">Install Multicluster Verrazzano</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/setup/install/customizing/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Customize Installations</a>
  </li>
  <ul>
    <li class="collapse " id="docssetupinstallcustomizing">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupinstallcustomizingstorage" href="../../../../docs/setup/install/customizing/storage/">Persistent Storage</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupuninstalluninstall" href="../../../../docs/setup/uninstall/uninstall/">Uninstall</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupupgradeupgrade" href="../../../../docs/setup/upgrade/upgrade/">Upgrade</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssetupprivate-registryprivate-registry" href="../../../../docs/setup/private-registry/private-registry/">Use a Private Registry</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/operations/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Access Verrazzano</a>
  </li>
  <ul>
    <li class="collapse " id="docsoperations">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Applications</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplications">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/multicluster/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Multicluster</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplicationsmulticluster">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/projects/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Projects</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplicationsprojects">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/applications/workloads/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Workloads</a>
  </li>
  <ul>
    <li class="collapse " id="docsapplicationsworkloads">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapplicationsworkloadscoherencecoherence" href="../../../../docs/applications/workloads/coherence/coherence/">Coherence</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapplicationsworkloadshelidonhelidon" href="../../../../docs/applications/workloads/helidon/helidon/">Helidon</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/networking/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Networking</a>
  </li>
  <ul>
    <li class="collapse " id="docsnetworking">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsnetworkingtrafficnet-traffic" href="../../../../docs/networking/traffic/net-traffic/">Network Traffic</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsnetworkingsecuritynet-security" href="../../../../docs/networking/security/net-security/">Network Security</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/security/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Security</a>
  </li>
  <ul>
    <li class="collapse " id="docssecurity">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityrbacrbac" href="../../../../docs/security/rbac/rbac/">Kubernetes RBAC</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecuritykeycloakkeycloak" href="../../../../docs/security/keycloak/keycloak/">Keycloak and SSO</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityproxiesproxies" href="../../../../docs/security/proxies/proxies/">Verrazzano Proxies</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityaccountsaccounts" href="../../../../docs/security/accounts/accounts/">Default User Accounts</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssecurityappsecappsec" href="../../../../docs/security/appsec/appsec/">Application Security</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/monitoring/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Monitoring &amp; Logging</a>
  </li>
  <ul>
    <li class="collapse " id="docsmonitoring">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/monitoring/logs/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Logging</a>
  </li>
  <ul>
    <li class="collapse " id="docsmonitoringlogs">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsmonitoringmetricsmetrics" href="../../../../docs/monitoring/metrics/metrics/">Metrics</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/troubleshooting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a>
  </li>
  <ul>
    <li class="collapse " id="docstroubleshooting">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingtroubleshooting-application-deployment" href="../../../../docs/troubleshooting/troubleshooting-application-deployment/">Application Deployment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingtroubleshooting-multicluster" href="../../../../docs/troubleshooting/troubleshooting-multicluster/">Multicluster</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/troubleshooting/diagnostictools/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Diagnostic Tools</a>
  </li>
  <ul>
    <li class="collapse " id="docstroubleshootingdiagnostictools">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsverrazzanoanalysistool" href="../../../../docs/troubleshooting/diagnostictools/verrazzanoanalysistool/">Verrazzano Analysis Tools</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Analysis Advice</a>
  </li>
  <ul>
    <li class="collapse " id="docstroubleshootingdiagnostictoolsanalysisadvice">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullbackoff" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullbackoff/">Image Pull Back Off</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullnotfound" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullnotfound/">Image Pull Not Found</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullratelimit" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullratelimit/">Image Pull Rate Limit</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceimagepullservice" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/imagepullservice/">Image Pull Service Issue</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceingressnoloadbalancerip" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/ingressnoloadbalancerip/">Ingress Controller No Load Balancer IP</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceingressociiplimitexceeded" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/ingressociiplimitexceeded/">Ingress Controller OCI IP Limit Exceeded</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceinstallfailure" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/installfailure/">Install Failure</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceingressinstallfailure" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/ingressinstallfailure/">Install Ingress Controller Failure</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadviceinsufficientmemory" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/insufficientmemory/">Insufficient Memory</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadvicependingpods" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/pendingpods/">Pending Pods</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingdiagnostictoolsanalysisadvicepodproblemsnotreported" href="../../../../docs/troubleshooting/diagnostictools/analysisadvice/podproblemsnotreported/">Problem Pods</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docstroubleshootingtroubleshooting" href="../../../../docs/troubleshooting/troubleshooting/">Known Issues</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Examples</a>
  </li>
  <ul>
    <li class="collapse " id="docssamples">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesapplication-deployment-guide" href="../../../../docs/samples/application-deployment-guide/">Application Deployment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssampleslift-and-shift" href="../../../../docs/samples/lift-and-shift/">Lift-and-Shift</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssampleshello-world" href="../../../../docs/samples/hello-world/">Hello World Helidon</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplessock-shop" href="../../../../docs/samples/sock-shop/">Sock Shop</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesspring-boot" href="../../../../docs/samples/spring-boot/">Spring Boot</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesstandard-kubernetes" href="../../../../docs/samples/standard-kubernetes/">Standard Kubernetes Resources</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplestodo-list" href="../../../../docs/samples/todo-list/">ToDo List</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docssamplesbobs-books" href="../../../../docs/samples/bobs-books/">Bob&#39;s Books</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Multicluster</a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticluster">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/hello-helidon/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticlusterhello-helidon">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/sock-shop/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticlustersock-shop">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/multicluster/todo-list/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssamplesmulticlustertodo-list">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/helidon-config/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssampleshelidon-config">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/samples/hello-helidon/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section"></a>
  </li>
  <ul>
    <li class="collapse " id="docssampleshello-helidon">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse " id="docsreference">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/reference/api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API</a>
  </li>
  <ul>
    <li class="collapse " id="docsreferenceapi">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapioamingresstrait" href="../../../../docs/reference/api/oam/ingresstrait/">IngressTrait CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapioammetricstrait" href="../../../../docs/reference/api/oam/metricstrait/">MetricsTrait CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlusterapplicationconfiguration" href="../../../../docs/reference/api/multicluster/multiclusterapplicationconfiguration/">MultiClusterApplicationConfiguration CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlustercomponent" href="../../../../docs/reference/api/multicluster/multiclustercomponent/">MultiClusterComponent CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlusterconfigmap" href="../../../../docs/reference/api/multicluster/multiclusterconfigmap/">MultiClusterConfigMap CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlusterresourcestatus" href="../../../../docs/reference/api/multicluster/multiclusterresourcestatus/">MultiClusterResourceStatus Subresource</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlustermulticlustersecret" href="../../../../docs/reference/api/multicluster/multiclustersecret/">MultiClusterSecret CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlusterplacement" href="../../../../docs/reference/api/multicluster/placement/">Placement Subresource</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapiverrazzanoverrazzano" href="../../../../docs/reference/api/verrazzano/verrazzano/">Verrazzano CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapioamworkloads" href="../../../../docs/reference/api/oam/workloads/">Verrazzano Workload CRDs</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlusterverrazzanomanagedcluster" href="../../../../docs/reference/api/multicluster/verrazzanomanagedcluster/">VerrazzanoManagedCluster CRD</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapimulticlusterverrazzanoproject" href="../../../../docs/reference/api/multicluster/verrazzanoproject/">VerrazzanoProject CRD</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceversions" href="../../../../docs/reference/versions/">Software Versions</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="../../../../docs/releasenotes/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Release Notes</a>
  </li>
  <ul>
    <li class="collapse " id="docsreleasenotes">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            











<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#install-verrazzano">Install Verrazzano</a></li>
        <li><a href="#register-the-managed-cluster-with-the-admin-cluster">Register the managed cluster with the admin cluster</a></li>
        <li><a href="#run-applications-in-multicluster-verrazzano">Run applications in multicluster Verrazzano</a></li>
        <li><a href="#use-the-admin-cluster-ui">Use the admin cluster UI</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		













<li class="breadcrumb-item" >
	<a href="https://verrazzano.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://verrazzano.io/docs/setup/">Setup</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://verrazzano.io/docs/setup/install/">Install</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://verrazzano.io/docs/setup/install/multicluster/">Install Multicluster Verrazzano</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Install Multicluster Verrazzano</h1>
    <div class="lead">How to set up a multicluster Verrazzano environment</div>
	       
	<h2 id="prerequisites">Prerequisites</h2>
<p>Before you begin, read this document, <a href="../../../../docs/concepts/verrazzanomulticluster/">Verrazzano in a multicluster environment</a>.</p>
<h2 id="overview">Overview</h2>
<p>To set up a multicluster Verrazzano environment, you will need two or more Kubernetes clusters. One of these clusters
will the <em>admin</em> cluster; the others will be <em>managed</em> clusters.</p>
<p>The instructions here assume an admin cluster and a single managed cluster. For each additional managed
cluster, simply repeat the managed cluster instructions.</p>
<h2 id="install-verrazzano">Install Verrazzano</h2>
<p>Install Verrazzano on each Kubernetes cluster.</p>
<ul>
<li>On one cluster, install Verrazzano using the <code>dev</code> or <code>prod</code> profile; this will be the <em>admin</em> cluster.</li>
<li>On the other cluster, install Verrazzano using the <code>managed-cluster</code> profile; this will be a
managed cluster. The <code>managed-cluster</code> profile contains only the components that are required for a managed cluster.</li>
</ul>
<p>For detailed instructions on how to install and customize Verrazzano on a Kubernetes cluster using a specific profile,
see the <a href="../../../../docs/setup/install/installation/">Installation Guide</a> and <a href="../../../../docs/setup/install/profiles/">Installation Profiles</a>.</p>
<h2 id="register-the-managed-cluster-with-the-admin-cluster">Register the managed cluster with the admin cluster</h2>
<p>The following sections show you how to register the managed cluster with the admin cluster. As indicated, some of these
steps are performed on the admin cluster and some on the managed cluster.</p>
<!-- omit in toc -->
<h3 id="preregistration-setup">Preregistration setup</h3>
<p>Before registering the managed cluster, first you&rsquo;ll need to set up the following items:</p>
<ul>
<li>A Secret containing the managed cluster&rsquo;s CA certificate. Note that the <code>cacrt</code> field in this secret can be empty if
the managed cluster uses a well-known CA. It is required only if the managed cluster uses self-signed certificates.
This CA certificate is used by the admin cluster to scrape metrics from the managed cluster, for both applications and Verrazzano components.</li>
<li>A ConfigMap containing the externally reachable address of the admin cluster. This will be provided to the managed
cluster during registration so that it can connect to the admin cluster.</li>
</ul>
<p>Follow these preregistration setup steps:</p>
<ol>
<li>
<p>If needed for the admin cluster, obtain the managed cluster&rsquo;s CA certificate.
The admin cluster scrapes metrics from the managed cluster&rsquo;s Prometheus endpoint. If the managed cluster
Verrazzano installation uses self-signed certificates, then the admin cluster will need the managed cluster&rsquo;s CA
certificate in order to make an <code>https</code> connection.</p>
<ul>
<li>Depending on whether the Verrazzano installation on the managed cluster uses
self-signed certificates or certificates signed by a well-known certificate authority,
choose the appropriate instructions.</li>
<li>If you are unsure what type of certificates are used, check for the <code>system-tls</code> secret in the <code>verrazzano-system</code> namespace
on the managed cluster.
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the managed cluster</span>
$ kubectl -n verrazzano-system get secret system-tls
</code></pre></div><p>If this secret is present, then your managed cluster is using self-signed certificates. If it is <em>not</em> present,
then your managed cluster is using certificates signed by a well-known certificate authority.
<nav>
	<div class="nav nav-tabs" id="nav-tab" role="tablist">

		
		

		
		
		

		

		<a class="nav-item nav-link active" id="nav-2" data-toggle="tab" href="#tab21" role="tab"
		   aria-controls="nav-home" aria-selected="true">Well-known CA</a>

		
		

		
		
		

		

		<a class="nav-item nav-link" id="nav-2" data-toggle="tab" href="#tab22" role="tab"
		   aria-controls="nav-home" aria-selected="false">Self-Signed</a>

		
		

	</div>
</nav>

<div class="tab-content" id="2">


     





<div class="tab-pane fade show active" id="tab21" role="tabpanel" aria-labelledby="nav-tabName1">

	<br>
<p>In this case, create a file called <code>managed1.yaml</code> with an empty value for the <code>cacrt</code>
field as follows:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ kubectl create secret generic <span style="color:#4e9a06">&#34;ca-secret-managed1&#34;</span> -n verrazzano-mc <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>     --from-literal<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">cacrt</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span> --dry-run<span style="color:#ce5c00;font-weight:bold">=</span>client -o yaml &gt; managed1.yaml<span style="color:#000;font-weight:bold">;</span>
</code></pre></div>

</div>



     





<div class="tab-pane fade" id="tab22" role="tabpanel" aria-labelledby="nav-tabName2">

	<br>
<p>If the managed cluster certificates are self-signed, create a file called <code>managed1.yaml</code> containing the CA
certificate of the managed cluster as the value of the <code>cacrt</code> field. In the following commands, the managed cluster&rsquo;s
CA certificate is saved in an environment variable called <code>MGD_CA_CERT</code>. Then use the <code>--dry-run</code> option of the
<code>kubectl</code> command to generate the <code>managed1.yaml</code> file.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the managed cluster</span>
$ <span style="color:#000">MGD_CA_CERT</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>kubectl get secret system-tls <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>     -n verrazzano-system <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>     -o <span style="color:#000">jsonpath</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{.data.ca\.crt}&#34;</span> <span style="color:#000;font-weight:bold">|</span> base64 --decode<span style="color:#204a87;font-weight:bold">)</span>
$ kubectl create secret generic <span style="color:#4e9a06">&#34;ca-secret-managed1&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -n verrazzano-mc <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --from-literal<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">cacrt</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#000">$MGD_CA_CERT</span><span style="color:#4e9a06">&#34;</span> <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  --dry-run<span style="color:#ce5c00;font-weight:bold">=</span>client <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>  -o yaml &gt; managed1.yaml
</code></pre></div>

</div>



     

</div></p>
</li>
</ul>
</li>
<li>
<p>Create a Secret on the <em>admin</em> cluster that contains the CA certificate for the managed cluster. This secret will be used for scraping metrics from the managed cluster.
The file <code>managed1.yaml</code> that was created in the previous step provides input to this step.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the admin cluster</span>
$ kubectl apply -f managed1.yaml

<span style="color:#8f5902;font-style:italic"># Once the command succeeds, you may delete the managed1.yaml file</span>
$ rm managed1.yaml
</code></pre></div></li>
<li>
<p>Obtain the publicly accessible Kubernetes API server address for the admin cluster from its <code>kubeconfig</code> file, using
the following instructions.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># First list the contexts in the kubeconfig file - sample output is shown below</span>
$ kubectl config get-contexts -o<span style="color:#ce5c00;font-weight:bold">=</span>name
my-admin-cluster
my-managed-cluster
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># From the output, find the admin cluster&#39;s context name and use it in the next command</span>
<span style="color:#8f5902;font-style:italic"># View the information for that context in your kubeconfig file</span> 
$ kubectl --context <span style="color:#ce5c00;font-weight:bold">[</span>your-admin-cluster-context-name<span style="color:#ce5c00;font-weight:bold">]</span> config view --minify
apiVersion: v1
kind: Config
clusters:
- cluster:
  certificate-authority-data: DATA+OMITTED
  server: https://127.0.0.1:46829
  name: kind-managed1
contexts:
....
....
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># In the output of the above command, the address shown in the &#34;server&#34; field is the Kubernetes API server address.</span>
<span style="color:#8f5902;font-style:italic"># Set the ADMIN_K8S_SERVER_ADDRESS environment variable to that value e.g. in the above sample output, the</span>
<span style="color:#8f5902;font-style:italic"># value is https://127.0.0.1:46829</span>
$ <span style="color:#204a87">export</span> <span style="color:#000">ADMIN_K8S_SERVER_ADDRESS</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;the server address from the config output&gt;
</code></pre></div></li>
<li>
<p>On the admin cluster, create a ConfigMap that contains the externally accessible admin cluster Kubernetes server
address found in the previous step.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the admin cluster</span>
$ kubectl apply -f <span style="color:#4e9a06">&lt;&lt;EOF -
</span><span style="color:#4e9a06">apiVersion: v1
</span><span style="color:#4e9a06">kind: ConfigMap
</span><span style="color:#4e9a06">metadata:
</span><span style="color:#4e9a06">  name: verrazzano-admin-cluster
</span><span style="color:#4e9a06">  namespace: verrazzano-mc
</span><span style="color:#4e9a06">data:
</span><span style="color:#4e9a06">  server: &#34;${ADMIN_K8S_SERVER_ADDRESS}&#34;
</span><span style="color:#4e9a06">EOF</span>
</code></pre></div></li>
</ol>
<!-- omit in toc -->
<h3 id="registration-steps">Registration steps</h3>
<p>Perform the first three registration steps on the <em>admin</em> cluster, and the last step, on the <em>managed</em> cluster.
The cluster against which to run the command is indicated in each code block.</p>
<h4 id="on-the-admin-cluster">On the admin cluster</h4>
<ol>
<li>
<p>To begin the registration process for a managed cluster named <code>managed1</code>, apply the VerrazzanoManagedCluster object on the admin cluster.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the admin cluster</span>
$ kubectl apply -f <span style="color:#4e9a06">&lt;&lt;EOF -
</span><span style="color:#4e9a06">apiVersion: clusters.verrazzano.io/v1alpha1
</span><span style="color:#4e9a06">kind: VerrazzanoManagedCluster
</span><span style="color:#4e9a06">metadata:
</span><span style="color:#4e9a06">  name: managed1
</span><span style="color:#4e9a06">  namespace: verrazzano-mc
</span><span style="color:#4e9a06">spec:
</span><span style="color:#4e9a06">  description: &#34;Test VerrazzanoManagedCluster object&#34;
</span><span style="color:#4e9a06">  caSecret: ca-secret-managed1
</span><span style="color:#4e9a06">EOF</span>
</code></pre></div></li>
<li>
<p>Wait for the VerrazzanoManagedCluster resource to reach the <code>Ready</code> status. At that point, it will have generated a YAML
file that must be applied on the managed cluster to complete the registration process.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the admin cluster</span>
$ kubectl <span style="color:#204a87">wait</span> --for<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">condition</span><span style="color:#ce5c00;font-weight:bold">=</span>Ready <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    vmc managed1 -n verrazzano-mc
</code></pre></div></li>
<li>
<p>Export the YAML file created to register the managed cluster.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the admin cluster</span>
$ kubectl get secret verrazzano-cluster-managed1-manifest <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    -n verrazzano-mc <span style="color:#4e9a06">\
</span><span style="color:#4e9a06"></span>    -o <span style="color:#000">jsonpath</span><span style="color:#ce5c00;font-weight:bold">={</span>.data.yaml<span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">|</span> base64 --decode &gt; register.yaml
</code></pre></div></li>
</ol>
<h4 id="on-the-managed-cluster">On the managed cluster</h4>
<p>Apply the registration file exported in the previous step, on the managed cluster.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the managed cluster</span>
$ kubectl apply -f register.yaml

<span style="color:#8f5902;font-style:italic"># Once the command succeeds, you may delete the register.yaml file</span>
$ rm register.yaml
</code></pre></div><p>After this step, the managed cluster will begin connecting to the admin cluster periodically. When the managed cluster
connects to the admin cluster, it will update the <code>Status</code> field of the <code>VerrazzanoManagedCluster</code> resource for this
managed cluster, with the following information:</p>
<ul>
<li>The timestamp of the most recent connection made from the managed cluster, in the <code>lastAgentConnectTime</code> status field.</li>
<li>The host address of the Prometheus instance running on the managed cluster, in the <code>prometheusHost</code> status field. This is
then used by the admin cluster to scrape metrics from the managed cluster.</li>
<li>The API address of the managed cluster, in the <code>apiUrl</code> status field. This is used by the admin cluster&rsquo;s API proxy to
route incoming requests for managed cluster information, to the managed cluster&rsquo;s API proxy.</li>
</ul>
<h3 id="verifying-that-managed-cluster-registration-completed">Verifying that managed cluster registration completed</h3>
<p>You can perform all the verification steps on the admin cluster.</p>
<ol>
<li>
<p>Verify that the managed cluster can connect to the admin cluster. View the status of the <code>VerrazzanoManagedCluster</code>
resource on the admin cluster, and check whether the <code>lastAgentConnectTime</code>, <code>prometheusUrl</code> and <code>apiUrl</code> fields are
populated. This may take up to 2 minutes after completing the registration steps.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#8f5902;font-style:italic"># On the admin cluster</span>
$ kubectl get vmc managed1 -n verrazzano-mc -o yaml
   
<span style="color:#8f5902;font-style:italic"># Sample output showing the status field</span>
spec:
  ....
  ....
status:
  apiUrl: https://verrazzano.default.172.18.0.211.nip.io
  conditions:
  - lastTransitionTime: <span style="color:#4e9a06">&#34;2021-07-07T15:49:43Z&#34;</span>
    message: Ready
    status: <span style="color:#4e9a06">&#34;True&#34;</span>
    type: Ready
  lastAgentConnectTime: <span style="color:#4e9a06">&#34;2021-07-16T14:47:25Z&#34;</span>
  prometheusHost: prometheus.vmi.system.default.172.18.0.211.nip.io
</code></pre></div></li>
<li>
<p>Verify that the managed cluster is successfully registered with Rancher.
When you perform the registration steps, Verrazzano also registers the managed cluster with Rancher.
View the Rancher UI on the admin cluster. If the registration with Rancher was successful, then your cluster will be
listed in Rancher&rsquo;s list of clusters, and should be in <code>Active</code> state. You can find the Rancher UI URL for your
cluster by following the instructions for <a href="../../../../docs/operations/">Accessing Verrazzano</a>.</p>
</li>
</ol>
<h2 id="run-applications-in-multicluster-verrazzano">Run applications in multicluster Verrazzano</h2>
<p>The Verrazzano multicluster setup is now complete and you can deploy applications by following the <a href="../../../../docs/samples/multicluster/hello-helidon/">Multicluster Hello World Helidon</a> example application.</p>
<h2 id="use-the-admin-cluster-ui">Use the admin cluster UI</h2>
<p>The admin cluster serves as a central point from which to register and deploy applications to managed clusters.</p>
<p>In the Verrazzano UI on the admin cluster, you can view the following:</p>
<ul>
<li>The managed clusters registered with this admin cluster.</li>
<li>VerrazzanoProjects located on this admin cluster, or any of its registered managed clusters, or both.</li>
<li>Applications located on this admin cluster, or any of its registered managed clusters, or both.</li>
</ul>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/verrazzano/docs/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/verrazzano/docs/issues/new">tell us how we can improve</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified July 19, 2021: <a  href="../../../../commit/cd8b47ad4bd71503ab3a5d87002ae490933b9f26">Multicluster install doc improvements. (#183) (cd8b47a)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://twitter.com/verrazzano_io">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/tags/verrazzano">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/verrazzano/verrazzano">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://bit.ly/3gOeRJn">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 Oracle and/or its affiliates</small>
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="../../../../js/main.min.460c8ae21829f9b330823a08f34ac961d7d0daa8874c8c9eba7ea0484bb42a79.js" integrity="sha256-RgyK4hgp&#43;bMwgjoI80rJYdfQ2qiHTIyeun6gSEu0Knk=" crossorigin="anonymous"></script>




  </body>
</html>